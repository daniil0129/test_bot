# Базовый образ - Python 3.10 на slim-версии Alpine Linux
# (маленький размер + все необходимое для Python)
FROM python:3.10-slim

# Создаем и переходим в рабочую директорию /app внутри контейнера
WORKDIR /app

# Копируем файл с зависимостями в контейнер
# (отдельный шаг для кэширования слоя с зависимостями)
COPY requirements.txt .

# Устанавливаем зависимости из requirements.txt
# --no-cache-dir - не сохраняем кэш pip (уменьшаем размер образа)
RUN pip install --no-cache-dir -r requirements.txt

# Копируем ВСЕ файлы из текущей директории (на хосте) в /app (в контейнере)
# (кроме тех, что указаны в .dockerignore)
COPY . .

# Команда для запуска приложения при старте контейнера
# (выполняет 'python app.py' в рабочей директории /app)
CMD ["python", "app.py"]